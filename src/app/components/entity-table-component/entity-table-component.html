<div class="entity-table-container flex flex-col">
	<div class="header w-full flex flex-row justify-between">
		<div class="table-title">{{ tableTitle }}</div>

		<div class="search-container">
			<input-wrapper [prefixIcon]="'bi-search'">
				<input type="text" placeholder="Search..." />
			</input-wrapper>
		</div>
	</div>

	<div class="body">
		<!-- Desktop view -->
		<table>
			<thead>
				<tr>
					@for (field of fields; track field.key) {
						@if (isFieldVisible(field.visibility)) {
							<th [ngClass]="'col-size-' + (field.size || 'auto')">{{ field.label }}</th>
						}
					}
				</tr>
				<th></th>
			</thead>
			<tbody>
				@for (row of data(); track getEntityFieldValue(row, 'id')) {
					<tr>
						@for (field of fields; track field.key) {
							@if (isFieldVisible(field.visibility)) {
								<td [ngClass]="'col-size-' + (field.size || 'auto')">
									{{ getEntityFieldValue(row, field.key) }}
								</td>
							}
						}

						<td class="entity-actions">
							<div class="entity-actions-container">
								<i
									class="bi bi-three-dots"
									(click)="toggleEntityActions($event, getEntityFieldValue(row, 'id'))"></i>

								@if (isEntityActionsVisible(getEntityFieldValue(row, 'id'))) {
									<div
										class="actions-container flex flex-col shadow-md"
										(click)="$event.stopPropagation()">
										<div class="flex" (click)="onView(row)">
											<i class="bi bi-eye"></i>
											View
										</div>
										<div class="flex" (click)="onEdit(row)">
											<i class="bi bi-pencil-square"></i>
											Edit
										</div>
										<div class="flex" (click)="onDelete(row)">
											<i class="bi bi-trash"></i>
											Delete
										</div>
									</div>
								}
							</div>
						</td>
					</tr>
				}
			</tbody>
		</table>

		<!-- Mobile view -->
		<div class="list-view">
			@for (entry of data(); track getEntityFieldValue(entry, 'id')) {
				<div class="list-entry">{{ getEntityFieldValue(entry, 'name') }}</div>
			}
		</div>
	</div>
</div>
